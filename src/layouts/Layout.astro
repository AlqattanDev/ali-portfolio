---
---

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ali AlQattan - System Architect</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS-based terminal background animation (more reliable than particles.js) -->
    
    <!-- Add favicon -->
    <link rel="icon" type="image/svg+xml" href="/ali-portfolio/favicon.svg">
    
</head>
<body class="digital-view">


    <div class="watermark">ARCHITECT</div>
    <div class="container page">
        <div class="content">
            <slot />
        </div>
    </div>

    <!-- Load GSAP with proper error handling -->
    <script>
      // Load GSAP and ScrollTrigger dynamically
      function loadGSAP() {
        return new Promise((resolve, reject) => {
          if (typeof gsap !== 'undefined' && gsap.plugins.ScrollTrigger) {
            resolve(gsap);
            return;
          }
          
          const loadScript = (src) => {
            return new Promise((resolve, reject) => {
              const script = document.createElement('script');
              script.src = src;
              script.onload = resolve;
              script.onerror = reject;
              document.head.appendChild(script);
            });
          };

          // Load GSAP first, then ScrollTrigger
          loadScript('https://unpkg.com/gsap@3.13.0/dist/gsap.min.js')
            .then(() => loadScript('https://unpkg.com/gsap@3.13.0/dist/ScrollTrigger.min.js'))
            .then(() => {
              if (typeof gsap !== 'undefined') {
                gsap.registerPlugin(ScrollTrigger);
                resolve(gsap);
              } else {
                reject(new Error('GSAP failed to load'));
              }
            })
            .catch(reject);
        });
      }

      // Initialize comprehensive scroll animations
      function initScrollAnimations() {
        console.log('🎬 GSAP scroll animations initialized');
        
        // Set up performance defaults
        gsap.defaults({ 
          ease: "power3.out", 
          duration: 0.8
        });

        // Respect reduced motion preferences
        const shouldAnimate = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        
        if (!shouldAnimate) {
          console.log('🔇 Animations disabled due to user preference');
          return;
        }

        // 1. Header and ASCII Art Animation
        const asciiName = document.querySelector('.ascii-name');
        if (asciiName) {
          gsap.fromTo(asciiName, 
            {
              opacity: 0,
              y: -30,
              scale: 0.95
            },
            {
              opacity: 1,
              y: 0,
              scale: 1,
              duration: 1.2,
              ease: "back.out(1.7)",
              delay: 0.3
            }
          );
        }

        // 2. System Info Animation (staggered)
        const systemInfoSpans = document.querySelectorAll('.system-info span');
        if (systemInfoSpans.length > 0) {
          gsap.fromTo(systemInfoSpans, 
            {
              opacity: 0,
              x: -20
            },
            {
              opacity: 1,
              x: 0,
              duration: 0.6,
              stagger: 0.1,
              delay: 0.8,
              ease: "power2.out"
            }
          );
        }

        // 3. Contact Section Animation
        const contactSection = document.querySelector('[data-component="contact-info"]');
        if (contactSection) {
          ScrollTrigger.create({
            trigger: contactSection,
            start: "top 80%",
            end: "bottom 20%",
            onEnter: () => {
              const contactParagraphs = contactSection.querySelectorAll('p');
              if (contactParagraphs.length > 0) {
                gsap.fromTo(contactParagraphs, 
                  {
                    opacity: 0,
                    y: 20,
                    x: -10
                  },
                  {
                    opacity: 1,
                    y: 0,
                    x: 0,
                    duration: 0.6,
                    stagger: 0.1,
                    ease: "power3.out"
                  }
                );
              }
            },
            once: true
          });
        }

        // 4. Projects Section - Cards Animation
        const projectsSection = document.querySelector('[data-component="projects"]');
        if (projectsSection) {
          ScrollTrigger.create({
            trigger: projectsSection,
            start: "top 85%",
            end: "bottom 20%",
            onEnter: () => {
              const projectCards = document.querySelectorAll('[data-component="projects"] .entry');
              if (projectCards.length > 0) {
                gsap.fromTo(projectCards, 
                  {
                    opacity: 0,
                    y: 60,
                    scale: 0.9
                  },
                  {
                    opacity: 1,
                    y: 0,
                    scale: 1,
                    duration: 0.8,
                    stagger: 0.15,
                    ease: "back.out(1.7)"
                  }
                );
              }
            },
            once: true
          });
        }

        // 5. Skills Section - Progressive Reveal
        ScrollTrigger.create({
          trigger: '[data-component="skills"]',
          start: "top 80%",
          end: "bottom 20%",
          onEnter: () => {
            // Skills categories fade in first
            gsap.fromTo('.skills-grid > div', 
              {
                opacity: 0,
                y: 40,
                scale: 0.95
              },
              {
                opacity: 1,
                y: 0,
                scale: 1,
                duration: 0.7,
                stagger: 0.2,
                ease: "power3.out"
              }
            );

            // Skill items animate after categories
            gsap.fromTo('.skill-item', 
              {
                opacity: 0,
                x: -20,
                scale: 0.9
              },
              {
                opacity: 1,
                x: 0,
                scale: 1,
                duration: 0.5,
                stagger: 0.08,
                delay: 0.3,
                ease: "power2.out"
              }
            );

            // Skill bars/progress animation (if they exist)
            const skillBars = document.querySelectorAll('.skill-progress');
            skillBars.forEach((bar, index) => {
              gsap.fromTo(bar, 
                { width: '0%' },
                { 
                  width: bar.dataset.skill || '80%', 
                  duration: 1.2, 
                  delay: 0.5 + index * 0.1,
                  ease: "power3.out"
                }
              );
            });
          },
          once: true
        });

        // 6. Education Section Animation
        ScrollTrigger.create({
          trigger: '[data-component="education"]',
          start: "top 85%",
          end: "bottom 20%",
          onEnter: () => {
            gsap.fromTo('[data-component="education"] > *', 
              {
                opacity: 0,
                y: 30,
                x: 20
              },
              {
                opacity: 1,
                y: 0,
                x: 0,
                duration: 0.7,
                stagger: 0.15,
                ease: "power3.out"
              }
            );
          },
          once: true
        });

        // 7. Footer/Checksum Animation
        ScrollTrigger.create({
          trigger: '.checksum',
          start: "top 90%",
          onEnter: () => {
            gsap.fromTo('.checksum', 
              {
                opacity: 0,
                y: 20,
                scale: 0.95
              },
              {
                opacity: 1,
                y: 0,
                scale: 1,
                duration: 0.6,
                ease: "power2.out"
              }
            );
          },
          once: true
        });

        // 8. Section Titles Animation
        ScrollTrigger.batch('.section-title', {
          onEnter: elements => {
            gsap.fromTo(elements, 
              {
                opacity: 0,
                y: -20,
                scale: 0.98
              },
              {
                opacity: 1,
                y: 0,
                scale: 1,
                duration: 0.8,
                stagger: 0.1,
                ease: "back.out(1.7)"
              }
            );
          },
          start: "top 85%",
          once: true
        });

        // 9. Parallax effect for background elements (subtle)
        if (window.innerWidth > 768) { // Only on desktop
          gsap.to('.watermark', {
            yPercent: -30,
            ease: "none",
            scrollTrigger: {
              trigger: "body",
              start: "top top",
              end: "bottom top",
              scrub: 1
            }
          });
        }

        // 10. Smooth scroll to sections (optional enhancement)
        document.querySelectorAll('a[href^="#"]').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(link.getAttribute('href'));
            if (target) {
              gsap.to(window, {
                scrollTo: target,
                duration: 1.2,
                ease: "power3.inOut"
              });
            }
          });
        });

        // Refresh ScrollTrigger on window resize
        window.addEventListener('resize', () => {
          ScrollTrigger.refresh();
        });

        // Initialize new ScrollAnimationController for contract compliance
        setTimeout(async () => {
          try {
            console.log('🎯 Initializing ScrollAnimationController...');
            
            // Create and initialize the ScrollAnimationController
            const controller = new ScrollAnimationController();
            const initialized = await controller.initialize({
              respectsReducedMotion: true,
              performanceMode: 'high',
              debugMode: false
            });

            if (!initialized) {
              console.warn('⚠️ Failed to initialize ScrollAnimationController');
              return;
            }

            // Set up contract-compliant animations for all sections
            const sections = ['contact-info', 'projects', 'skills', 'education'];
            let foundSections = 0;

            for (const sectionId of sections) {
              const element = document.querySelector(`[data-component="${sectionId}"]`);
              if (element) {
                await controller.animateSection(sectionId);
                foundSections++;
                console.log(`✅ ${sectionId} animation configured`);
              } else {
                console.warn(`⚠️ Section not found: ${sectionId}`);
              }
            }

            // Store controller globally for debugging and tests
            window.portfolioAnimations = controller;
            
            console.log(`🎯 Found ${foundSections} sections for animation`);
            console.log('✅ GSAP loaded successfully');
            console.log('✅ ScrollTrigger registered');
            console.log('✅ Animation system initialized');
            console.log('📊 Performance mode: high');
            
          } catch (error) {
            console.error('❌ Failed to initialize ScrollAnimationController:', error);
          }
        }, 500); // Small delay to ensure all elements are available
      }

      // ScrollAnimationController Class (T016)
      class ScrollAnimationController {
        constructor() {
          this.isInitialized = false;
          this.performanceMonitor = null;
          this.accessibilityManager = null;
          this.animationTargets = new Map();
          this.activeAnimations = new Set();
          this.config = {
            respectsReducedMotion: true,
            performanceMode: 'high',
            debugMode: false
          };
        }

        async initialize(config = {}) {
          try {
            this.config = { ...this.config, ...config };
            
            // Wait for GSAP to be available
            if (typeof gsap === 'undefined') {
              await loadGSAP();
            }
            
            // Set up performance monitoring
            if (window.PerformanceMonitor) {
              this.performanceMonitor = new window.PerformanceMonitor();
            }
            
            // Set up accessibility management
            if (window.AccessibilityManager) {
              this.accessibilityManager = new window.AccessibilityManager();
            }
            
            this.isInitialized = true;
            
            if (this.config.debugMode) {
              console.log('📱 ScrollAnimationController initialized');
            }
            
            return true;
          } catch (error) {
            console.error('Failed to initialize ScrollAnimationController:', error);
            return false;
          }
        }

        async animateSection(sectionId) {
          if (!this.isInitialized) {
            throw new AnimationError('Controller not initialized', 'NOT_INITIALIZED');
          }

          const validSections = ['contact-info', 'projects', 'skills', 'education'];
          if (!validSections.includes(sectionId)) {
            throw new AnimationError(`Invalid section ID: ${sectionId}`, 'INVALID_SECTION');
          }

          // Emit animation start event
          const startEvent = new CustomEvent('animationStart', {
            detail: {
              sectionId,
              targetCount: this.getTargetCount(sectionId),
              timestamp: performance.now()
            }
          });
          window.dispatchEvent(startEvent);

          // Perform the animation based on section
          try {
            await this.executeAnimation(sectionId);
            
            // Emit animation complete event
            const completeEvent = new CustomEvent('animationComplete', {
              detail: {
                sectionId,
                duration: performance.now() - startEvent.detail.timestamp,
                performance: this.getPerformanceMetrics()
              }
            });
            window.dispatchEvent(completeEvent);
            
          } catch (error) {
            throw new AnimationError(`Animation failed for ${sectionId}`, 'ANIMATION_FAILED', { sectionId, error: error.message });
          }
        }

        getTargetCount(sectionId) {
          const selectors = {
            'contact-info': '[data-component="contact-info"] p',
            'projects': '[data-component="projects"] .entry',
            'skills': '[data-component="skills"] .skills-grid > div',
            'education': '[data-component="education"] .entry'
          };
          
          const elements = document.querySelectorAll(selectors[sectionId] || '');
          return elements.length;
        }

        async executeAnimation(sectionId) {
          const element = document.querySelector(`[data-component="${sectionId}"]`);
          if (!element) {
            throw new Error(`Section element not found: ${sectionId}`);
          }

          // Create ScrollTrigger animation based on section type and contract specifications
          let animation;
          let scrollTriggerConfig;

          switch (sectionId) {
            case 'contact-info':
              scrollTriggerConfig = {
                trigger: element,
                start: 'top 80%', // Contract: trigger at top 80% threshold
                end: 'bottom 60%',
                toggleActions: 'play none none reverse'
              };
              animation = gsap.fromTo(element.children, 
                { opacity: 0, y: 30 },
                { 
                  opacity: 1, 
                  y: 0, 
                  duration: 0.6, // Contract: 0.6 duration
                  ease: 'power3.out', // Contract: power3.out easing
                  scrollTrigger: scrollTriggerConfig
                }
              );
              break;

            case 'projects':
              scrollTriggerConfig = {
                trigger: element,
                start: 'top 75%', // Contract: trigger at top 75% threshold
                end: 'bottom 50%',
                toggleActions: 'play none none reverse'
              };
              const projectCards = element.querySelectorAll('.entry');
              animation = gsap.fromTo(projectCards,
                { opacity: 0, y: 50 },
                { 
                  opacity: 1, 
                  y: 0, 
                  duration: 0.8, // Contract: 0.8 duration
                  ease: 'back.out(1.7)', // Contract: back.out(1.7) easing
                  stagger: 0.1, // Contract: 0.1 stagger delay
                  scrollTrigger: scrollTriggerConfig
                }
              );
              break;

            case 'skills':
              scrollTriggerConfig = {
                trigger: element,
                start: 'top 70%', // Contract: trigger at top 70% threshold
                end: 'bottom 50%',
                toggleActions: 'play none none reverse'
              };
              const skillCategories = element.querySelectorAll('.skills-grid > div');
              animation = gsap.fromTo(skillCategories,
                { opacity: 0, y: 40 },
                { 
                  opacity: 1, 
                  y: 0, 
                  duration: 0.7, // Contract: 0.7 duration
                  ease: 'power2.out', // Contract: power2.out easing
                  stagger: 0.15, // Contract: 0.15 stagger delay
                  scrollTrigger: scrollTriggerConfig
                }
              );
              break;

            case 'education':
              scrollTriggerConfig = {
                trigger: element,
                start: 'top 75%', // Contract: trigger at top 75% threshold
                end: 'bottom 50%',
                toggleActions: 'play none none reverse'
              };
              const educationEntries = element.querySelectorAll('.entry');
              animation = gsap.fromTo(educationEntries,
                { opacity: 0, scale: 0.95 },
                { 
                  opacity: 1, 
                  scale: 1, 
                  duration: 0.6, // Contract: 0.6 duration
                  ease: 'power3.out', // Contract: power3.out easing
                  stagger: 0.2, // Contract: 0.2 stagger delay
                  scrollTrigger: scrollTriggerConfig
                }
              );
              break;
          }

          // Store animation reference for cleanup
          this.activeAnimations.add(animation);
          this.animationTargets.set(sectionId, { element, animation, config: scrollTriggerConfig });

          // Return promise that resolves when animation setup is complete
          return new Promise((resolve) => {
            // Small delay to ensure ScrollTrigger is fully initialized
            setTimeout(() => {
              resolve();
            }, 50);
          });
        }

        getPerformanceMetrics() {
          return {
            averageFrameRate: this.performanceMonitor?.getAverageFrameRate() || 60,
            droppedFrames: this.performanceMonitor?.droppedFrames || 0,
            totalAnimations: this.performanceMonitor?.totalAnimations || 0,
            completedAnimations: this.performanceMonitor?.completedAnimations || 0,
            loadTime: this.performanceMonitor?.loadTime || 0
          };
        }

        destroy() {
          // Clean up ScrollTriggers
          if (window.ScrollTrigger) {
            ScrollTrigger.getAll().forEach(trigger => trigger.kill());
          }
          
          // Stop performance monitoring
          if (this.performanceMonitor) {
            this.performanceMonitor.stopMonitoring();
          }
          
          // Clear active animations
          this.activeAnimations.clear();
          this.animationTargets.clear();
          
          this.isInitialized = false;
          
          if (this.config.debugMode) {
            console.log('🧹 ScrollAnimationController destroyed');
          }
        }
      }

      // AnimationError Class (T016)
      class AnimationError extends Error {
        constructor(message, code, context = null) {
          super(message);
          this.name = 'AnimationError';
          this.code = code;
          this.context = context;
        }
      }

      // Make classes globally available for tests
      window.ScrollAnimationController = ScrollAnimationController;
      window.AnimationError = AnimationError;
      
      // Expose animation configuration for contract tests
      window.ANIMATION_CONFIG = {
        durations: {
          contact: 0.6,
          projects: 0.8, 
          skills: 0.7,
          education: 0.6
        },
        easings: {
          contact: 'power3.out',
          projects: 'back.out(1.7)',
          skills: 'power2.out',
          education: 'power3.out'
        },
        thresholds: {
          contact: 'top 80%',
          projects: 'top 75%',
          skills: 'top 70%',
          education: 'top 75%'
        }
      };

      // Enhanced Mode Switcher with GSAP Animations
      document.addEventListener('DOMContentLoaded', async () => {
        try {
          // Wait for GSAP to load
          const gsap = await loadGSAP();
          
          const switcher = document.querySelector('.mode-switcher');
          const switcherTrack = document.querySelector('.switcher-track');
          const switcherThumb = document.querySelector('.switcher-thumb');
          const iconDigital = document.querySelector('.icon-digital');
          const iconPrint = document.querySelector('.icon-print');
          const sunCore = document.querySelector('.sun-core');
          const sunRays = document.querySelector('.sun-rays');
          const qrPattern = document.querySelector('.qr-pattern');
          const body = document.body;
          const currentModeSpan = document.getElementById('current-mode');

          if (!switcher || !switcherTrack || !switcherThumb) return;

          // Initialize state
          let isDigitalMode = body.classList.contains('digital-view') || !body.classList.contains('print-view');
          
          // Set initial ARIA attributes
          switcher.setAttribute('aria-checked', isDigitalMode ? 'false' : 'true');
          if (currentModeSpan) {
            currentModeSpan.textContent = isDigitalMode ? 'digital' : 'print';
          }

          // Set initial visual state without animation
          gsap.set(switcherThumb, { x: isDigitalMode ? 0 : 30 });
          gsap.set(iconDigital, { opacity: isDigitalMode ? 1 : 0, scale: isDigitalMode ? 1 : 0.5 });
          gsap.set(iconPrint, { opacity: isDigitalMode ? 0 : 1, scale: isDigitalMode ? 0.5 : 1 });

          // Hover animations
          switcher.addEventListener('mouseenter', () => {
            gsap.to(switcher, { scale: 1.05, duration: 0.2, ease: "power2.out" });
            gsap.to(switcherTrack, { boxShadow: "0 0 20px rgba(0, 255, 65, 0.5)", duration: 0.2 });
          });

          switcher.addEventListener('mouseleave', () => {
            gsap.to(switcher, { scale: 1, duration: 0.2, ease: "power2.out" });
            gsap.to(switcherTrack, { boxShadow: "0 0 0px rgba(0, 255, 65, 0)", duration: 0.2 });
          });

        // Animation function for mode switching
        function animateSwitch(toDigital: boolean) {
          // Disable pointer events during animation
          if (switcher) switcher.style.pointerEvents = 'none';
          
          // Create animation timeline
          const tl = gsap.timeline({ 
            onComplete: () => {
              if (switcher) switcher.style.pointerEvents = 'auto';
            }
          });

          // Button press effect
          tl.to(switcher, { scale: 0.95, duration: 0.1, ease: "power2.inOut" })
            .to(switcher, { scale: 1.02, duration: 0.15, ease: "back.out(1.7)" });

          // Thumb slide animation
          tl.to(switcherThumb, { 
            x: toDigital ? 0 : 30, 
            duration: 0.4, 
            ease: "power3.inOut" 
          }, "-=0.2");

          if (toDigital) {
            // Digital mode animations
            tl.to(iconPrint, { 
              opacity: 0, 
              scale: 0.3, 
              rotation: -90, 
              duration: 0.2,
              ease: "power2.inOut" 
            }, "-=0.3")
            .to(iconDigital, { 
              opacity: 1, 
              scale: 1, 
              rotation: 0, 
              duration: 0.3,
              ease: "back.out(1.7)" 
            }, "-=0.1");

            // Sun rays rotation
            if (sunRays) {
              tl.to(sunRays, { 
                rotation: 360, 
                duration: 0.8, 
                ease: "power2.inOut" 
              }, "-=0.4");
            }

            // Sun core pulsing
            if (sunCore) {
              tl.to(sunCore, { 
                scale: 1.2, 
                duration: 0.2, 
                ease: "power2.inOut" 
              }, "-=0.3")
              .to(sunCore, { 
                scale: 1, 
                duration: 0.2, 
                ease: "power2.inOut" 
              });
            }
          } else {
            // Print mode animations
            tl.to(iconDigital, { 
              opacity: 0, 
              scale: 0.3, 
              rotation: 90, 
              duration: 0.2,
              ease: "power2.inOut" 
            }, "-=0.3")
            .to(iconPrint, { 
              opacity: 1, 
              scale: 1, 
              rotation: 0, 
              duration: 0.3,
              ease: "back.out(1.7)" 
            }, "-=0.1");

            // QR pattern animation
            if (qrPattern) {
              tl.fromTo(qrPattern, 
                { opacity: 0, scale: 0.5 }, 
                { opacity: 1, scale: 1, duration: 0.4, ease: "back.out(1.7)" }, 
                "-=0.2"
              );
            }
          }

          // Background color transition
          tl.to(body, { 
            backgroundColor: toDigital ? "#0a0a0a" : "#ffffff",
            duration: 0.6,
            ease: "power2.inOut"
          }, "-=0.8");

          return tl;
        }

        // Click handler with animations
        switcher.addEventListener('click', () => {
          const wasDigital = body.classList.contains('digital-view');
          const toDigital = !wasDigital;
          
          // Update classes
          if (toDigital) {
            body.classList.remove('print-view');
            body.classList.add('digital-view');
            switcher.setAttribute('aria-checked', 'false');
            switcher.setAttribute('aria-label', 'Switch to print preview mode (currently in digital mode)');
            if (currentModeSpan) currentModeSpan.textContent = 'digital';
          } else {
            body.classList.remove('digital-view');
            body.classList.add('print-view');
            switcher.setAttribute('aria-checked', 'true');
            switcher.setAttribute('aria-label', 'Switch to digital mode (currently in print mode)');
            if (currentModeSpan) currentModeSpan.textContent = 'print';
          }

          // Animate the switch
          animateSwitch(toDigital);
        });

        // Keyboard support
        switcher.addEventListener('keydown', (event: any) => {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            switcher.click();
          }
        });

          // Focus animations
          switcher.addEventListener('focus', () => {
            gsap.to(switcherTrack, { 
              boxShadow: "0 0 0 2px rgba(0, 255, 65, 0.6)", 
              duration: 0.2 
            });
          });

          switcher.addEventListener('blur', () => {
            gsap.to(switcherTrack, { 
              boxShadow: "0 0 0 0px rgba(0, 255, 65, 0)", 
              duration: 0.2 
            });
          });

          // Initialize scroll animations - DISABLED to prevent conflicts with ScrollAnimationController
          // initScrollAnimations();
          
          // Initialize ScrollAnimationController directly
          setTimeout(async () => {
            try {
              console.log('🎯 Initializing ScrollAnimationController...');
              
              const controller = new ScrollAnimationController();
              const initialized = await controller.initialize({
                respectsReducedMotion: true,
                performanceMode: 'high',
                debugMode: false
              });

              if (!initialized) {
                console.warn('⚠️ Failed to initialize ScrollAnimationController');
                return;
              }

              const sections = ['contact-info', 'projects', 'skills', 'education'];
              let foundSections = 0;

              for (const sectionId of sections) {
                const element = document.querySelector(`[data-component="${sectionId}"]`);
                if (element) {
                  await controller.animateSection(sectionId);
                  foundSections++;
                  console.log(`✅ ${sectionId} animation configured`);
                } else {
                  console.warn(`⚠️ Section not found: ${sectionId}`);
                }
              }

              window.portfolioAnimations = controller;
              
              console.log(`🎯 Found ${foundSections} sections for animation`);
              console.log('✅ GSAP loaded successfully');
              console.log('✅ ScrollTrigger registered');
              console.log('✅ Animation system initialized');
              console.log('📊 Performance mode: high');
              
            } catch (error) {
              console.error('❌ Failed to initialize ScrollAnimationController:', error);
            }
          }, 500);
        
        } catch (error) {
          console.error('Failed to initialize GSAP mode switcher:', error);
          
          // Fallback without animations
          const switcher = document.querySelector('.mode-switcher');
          const body = document.body;
          const currentModeSpan = document.getElementById('current-mode');
          
          if (switcher) {
            switcher.addEventListener('click', () => {
              const wasDigital = body.classList.contains('digital-view');
              const toDigital = !wasDigital;
              
              if (toDigital) {
                body.classList.remove('print-view');
                body.classList.add('digital-view');
                switcher.setAttribute('aria-checked', 'false');
                if (currentModeSpan) currentModeSpan.textContent = 'digital';
              } else {
                body.classList.remove('digital-view');
                body.classList.add('print-view');
                switcher.setAttribute('aria-checked', 'true');
                if (currentModeSpan) currentModeSpan.textContent = 'print';
              }
            });
          }
        }
      });
    </script>


    <style is:global>
      /* Comprehensive Design System - Digital Mode (Dark Theme) */
      :root {
        /* Background Layers */
        --bg-primary: #0a0a0a;      /* Main background */
        --bg-secondary: #1a1a1a;    /* Cards, sections */
        --bg-tertiary: #2a2a2a;     /* Elevated elements */
        
        /* Text Colors */
        --text-primary: #e0e0e0;    /* Main text (14:1 contrast) */
        --text-secondary: #a0a0a0;  /* Secondary text (7:1 contrast) */
        --text-muted: #aaaaaa;      /* Muted text (4.5:1+ contrast against dark) */
        
        /* Accent Colors */
        --accent-primary: #00ff41;   /* Main terminal green (12:1 contrast) */
        --accent-secondary: #39ff14; /* Bright highlights (15:1 contrast) */
        --accent-tertiary: #ffffff;  /* Important CTAs (21:1 contrast) */
        
        /* Functional Colors */
        --border-primary: #333333;   /* Main borders */
        --border-secondary: #1f1f1f; /* Subtle dividers */
        --surface-hover: #2d2d2d;    /* Interactive surface hover */

        /* Typography System */
        --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        --font-mono: 'JetBrains Mono', 'SF Mono', Monaco, 'Cascadia Code', monospace;

        /* Type Scale (Modular Scale: 1.25 - Major Third) */
        --text-xs: 0.75rem;    /* 12px */
        --text-sm: 0.875rem;   /* 14px */
        --text-base: 1rem;     /* 16px */
        --text-lg: 1.125rem;   /* 18px */
        --text-xl: 1.25rem;    /* 20px */
        --text-2xl: 1.563rem;  /* 25px */
        --text-3xl: 1.953rem;  /* 31px */
        --text-4xl: 2.441rem;  /* 39px */
        --text-5xl: 3.052rem;  /* 49px */
        
        /* Spacing System (0.5rem base unit) */
        --space-px: 1px;
        --space-0: 0;
        --space-1: 0.125rem;  /* 2px */
        --space-2: 0.25rem;   /* 4px */
        --space-3: 0.375rem;  /* 6px */
        --space-4: 0.5rem;    /* 8px */
        --space-5: 0.625rem;  /* 10px */
        --space-6: 0.75rem;   /* 12px */
        --space-8: 1rem;      /* 16px */
        --space-10: 1.25rem;  /* 20px */
        --space-12: 1.5rem;   /* 24px */
        --space-16: 2rem;     /* 32px */
        --space-20: 2.5rem;   /* 40px */
        --space-24: 3rem;     /* 48px */
        --space-32: 4rem;     /* 64px */
        --space-40: 5rem;     /* 80px */
        --space-48: 6rem;     /* 96px */
        --space-64: 8rem;     /* 128px */

        /* Responsive Container Widths */
        --container-sm: 640px;
        --container-md: 768px;
        --container-lg: 1024px;
        --container-xl: 1280px;
        --container-2xl: 1536px;

        /* Breakpoints */
        --breakpoint-sm: 640px;   /* Small devices */
        --breakpoint-md: 768px;   /* Tablets */
        --breakpoint-lg: 1024px;  /* Laptops */
        --breakpoint-xl: 1280px;  /* Desktops */
        --breakpoint-2xl: 1536px; /* Large desktops */

        /* Animation & Interaction */
        --ease-out-cubic: cubic-bezier(0.33, 1, 0.68, 1);
        --ease-in-out-cubic: cubic-bezier(0.65, 0, 0.35, 1);
        --duration-fast: 150ms;
        --duration-normal: 250ms;
        --duration-slow: 350ms;
        --focus-ring: 0 0 0 2px var(--accent-primary);
        --focus-ring-offset: 2px;

        /* Shadow System */
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-base: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        
        /* Glow effects for terminal theme */
        --glow-sm: 0 0 10px rgb(0 255 65 / 0.3);
        --glow-md: 0 0 20px rgb(0 255 65 / 0.4);
        --glow-lg: 0 0 30px rgb(0 255 65 / 0.5);

        /* Legacy compatibility (will be phased out) */
        --background-digital: var(--bg-primary);
        --foreground-digital: var(--accent-primary);
        --muted-digital: var(--text-muted);
        --border-digital: var(--border-primary);
        --accent-digital: var(--bg-secondary);
        --font-body: var(--font-mono);
        --font-accent: var(--font-primary);
        --transition-speed: var(--duration-normal);
      }

      /* Print Mode (Light Theme) */
      body.print-view {
        /* Override colors for print */
        --bg-primary: #ffffff;
        --bg-secondary: #f8f8f8;
        --bg-tertiary: #f0f0f0;
        
        --text-primary: #000000;    /* Black text (21:1 contrast) */
        --text-secondary: #333333;  /* Dark gray text (12.6:1 contrast) */
        --text-muted: #999999;      /* Light gray for digital mode (4.5:1+ contrast against dark) */
        
        --accent-primary: #000000;   /* Black for print clarity */
        --accent-secondary: #333333; /* Dark gray emphasis */
        --accent-tertiary: #000000;  /* Strong emphasis */
        
        --border-primary: #000000;   /* Black borders for print */
        --border-secondary: #cccccc; /* Light gray dividers */

        /* Legacy compatibility */
        --background-print: var(--bg-primary);
        --foreground-print: var(--text-primary);
        --muted-print: #333333;  /* Dark gray for good contrast on white */
        --border-print: var(--border-primary);
        --accent-print: var(--accent-primary);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: var(--font-primary);
        font-size: var(--text-base);
        line-height: 1.5;
        background: var(--bg-primary);
        color: var(--text-primary);
        transition: all var(--duration-normal) var(--ease-out-cubic);
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Explicit theme styling to ensure proper application */
      body.digital-view {
        background: var(--bg-primary) !important;
        color: var(--text-primary) !important;
      }

      body.print-view {
        background: var(--background-print) !important;
        color: var(--foreground-print) !important;
      }

      /* Typography Hierarchy */
      .text-hero {
        font-family: var(--font-primary);
        font-size: clamp(var(--text-3xl), 5vw, var(--text-5xl));
        font-weight: 700;
        line-height: 1.1;
        letter-spacing: -0.02em;
      }

      .text-section {
        font-family: var(--font-primary);
        font-size: clamp(var(--text-xl), 3vw, var(--text-2xl));
        font-weight: 600;
        line-height: 1.2;
        letter-spacing: -0.01em;
      }

      .text-subsection {
        font-family: var(--font-primary);
        font-size: var(--text-lg);
        font-weight: 600;
        line-height: 1.3;
      }

      .text-body {
        font-family: var(--font-primary);
        font-size: var(--text-base);
        font-weight: 400;
        line-height: 1.5;
      }

      .text-mono {
        font-family: var(--font-mono);
        font-size: var(--text-sm);
        font-weight: 400;
        line-height: 1.4;
      }

      /* Container with responsive width */
      /* Grid Layout System */
      .container {
        width: 100%;
        max-width: var(--container-xl);
        margin: 0 auto;
        padding-inline: var(--space-8);
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--space-24);
      }

      @media (min-width: 768px) {
        .container {
          padding-inline: var(--space-16);
          grid-template-columns: minmax(0, 1fr);
          gap: var(--space-32);
        }
      }

      /* CSS Grid Layout for Project Showcase */
      .projects-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: var(--space-16);
        margin-top: var(--space-16);
      }

      @media (min-width: 640px) {
        .projects-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: var(--space-20);
        }
      }

      @media (min-width: 1024px) {
        .projects-grid {
          grid-template-columns: repeat(3, 1fr);
          gap: var(--space-24);
        }
      }

      /* Flexbox for Component-level Alignment */
      .flex-container {
        display: flex;
        flex-direction: column;
        gap: var(--space-8);
      }

      .flex-row {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: space-between;
        gap: var(--space-8);
        flex-wrap: wrap;
      }

      @media (max-width: 768px) {
        .flex-row {
          flex-direction: column;
          align-items: flex-start;
          gap: var(--space-4);
        }
      }

      /* Enhanced Interactive Elements with Focus Indicators (T025) */
      .interactive {
        transition: all var(--duration-fast) var(--ease-out-cubic);
        cursor: pointer;
        position: relative;
        border-radius: var(--space-1);
      }

      .interactive:hover {
        transform: translateY(-2px);
      }

      /* Comprehensive Focus Indicators */
      .interactive:focus-visible,
      .interactive:focus,
      a:focus-visible,
      a:focus,
      button:focus-visible,
      button:focus,
      input:focus-visible,
      input:focus,
      select:focus-visible,
      select:focus,
      textarea:focus-visible,
      textarea:focus,
      [tabindex]:focus-visible,
      [tabindex]:focus {
        outline: 2px solid var(--accent-primary);
        outline-offset: 2px;
        box-shadow: var(--focus-ring);
        z-index: 1;
      }

      /* High contrast focus indicators */
      @media (prefers-contrast: high) {
        .interactive:focus-visible,
        a:focus-visible,
        button:focus-visible,
        input:focus-visible,
        select:focus-visible,
        textarea:focus-visible,
        [tabindex]:focus-visible {
          outline-width: 3px;
          outline-offset: 3px;
        }
      }

      /* Keyboard Navigation Enhancement */
      [tabindex="0"], [tabindex]:not([tabindex="-1"]) {
        position: relative;
      }

      /* Skip link for keyboard users */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 6px;
        background: var(--accent-primary);
        color: var(--bg-primary);
        padding: var(--space-2) var(--space-4);
        text-decoration: none;
        font-weight: 600;
        border-radius: var(--space-1);
        transition: top var(--duration-fast) var(--ease-out-cubic);
        z-index: 1000;
      }

      .skip-link:focus {
        top: 6px;
      }

      /* Enhanced link styles with better focus */
      a {
        position: relative;
        transition: all var(--duration-fast) var(--ease-out-cubic);
      }

      a:hover {
        color: var(--accent-secondary);
      }

      a:focus-visible,
      a:focus {
        color: var(--accent-secondary);
        background: rgba(0, 255, 65, 0.1);
        padding: var(--space-1) var(--space-2);
        margin: calc(-1 * var(--space-1)) calc(-1 * var(--space-2));
        border-radius: var(--space-1);
        outline: 2px solid var(--accent-primary);
        outline-offset: 2px;
      }

      /* Enhanced Reduced Motion and Accessibility Support (T026) */
      @media (prefers-reduced-motion: reduce) {
        *,
        ::before,
        ::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          transform: none !important;
        }
        
        .view-switcher:hover {
          transform: none !important;
        }
        
        .interactive:hover {
          transform: none !important;
        }
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :root {
          --text-primary: #ffffff;
          --bg-primary: #000000;
          --accent-primary: #ffff00;
          --border-primary: #ffffff;
        }
        
        body.print-view {
          --text-primary: #000000;
          --bg-primary: #ffffff;
          --accent-primary: #000000;
          --border-primary: #000000;
        }
      }

      /* Dark mode preference support - but don't override explicit theme classes */
      @media (prefers-color-scheme: light) {
        body:not(.print-view):not(.digital-view) {
          --bg-primary: #fafafa;
          --bg-secondary: #f0f0f0;
          --text-primary: #1a1a1a;
          --accent-primary: #0066cc;
          --border-primary: #cccccc;
        }
      }

      /* Font size preferences */
      @media (prefers-reduced-data: reduce) {
        /* Use system fonts when data usage is a concern */
        :root {
          --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
          --font-mono: 'SF Mono', Monaco, 'Cascadia Code', monospace;
        }
      }

      /* Screen reader only content */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      /* Visible when focused for screen readers */
      .sr-only-focusable:focus {
        position: static;
        width: auto;
        height: auto;
        padding: var(--space-2) var(--space-4);
        margin: 0;
        overflow: visible;
        clip: auto;
        white-space: normal;
        background: var(--accent-primary);
        color: var(--bg-primary);
        border-radius: var(--space-1);
        z-index: 1000;
      }

      .digital-only {
        display: block;
      }

      body.print-view .digital-only {
        display: none;
      }

      .watermark {
        position: fixed;
        top: 20px;
        left: 20px;
        font-size: 12px;
        color: var(--muted-digital);
        z-index: 1000;
        font-weight: bold;
        letter-spacing: 2px;
      }

      body.print-view .watermark {
        color: var(--muted-print);
      }

      .page.container {
        padding: var(--space-40) var(--space-8);
        position: relative;
        z-index: 1;
      }

      @media (min-width: 768px) {
        .page.container {
          padding: var(--space-40) var(--space-16);
        }
      }

      .page {
        min-height: 100vh;
      }

      .header {
        margin-bottom: var(--space-40);
        position: relative;
      }

      /* Name row container to position ASCII art and mode switcher */
      .name-row {
        display: flex;
        align-items: center;
        gap: var(--space-8);
        justify-content: flex-start;
        flex-wrap: wrap;
      }

      /* Enhanced Mode Switcher with GSAP Animations */
      .mode-switcher {
        background: transparent;
        border: none;
        color: var(--text-primary);
        padding: var(--space-2);
        cursor: pointer;
        font-family: var(--font-mono);
        font-size: var(--text-xs);
        width: 60px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 16px;
        overflow: visible;
        z-index: 100;
        flex-shrink: 0;
        outline: none;
        position: relative;
      }

      /* Switcher Track */
      .switcher-track {
        width: 100%;
        height: 100%;
        border-radius: 16px;
        background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
        border: 2px solid var(--accent-primary);
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Switcher Thumb */
      .switcher-thumb {
        width: 28px;
        height: 28px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
        position: absolute;
        top: 50%;
        left: 2px;
        transform: translateY(-50%);
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Icon Styles */
      .mode-switcher svg {
        width: 16px;
        height: 16px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        pointer-events: none;
      }

      .icon-digital {
        color: var(--bg-primary);
      }
      
      .icon-print {
        color: var(--bg-primary);
      }

      /* Print Mode Overrides */
      body.print-view .switcher-track {
        background: linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%);
        border-color: var(--border-primary);
      }

      body.print-view .switcher-thumb {
        background: linear-gradient(135deg, var(--text-primary) 0%, #333333 100%);
      }

      body.print-view .icon-digital,
      body.print-view .icon-print {
        color: var(--bg-primary);
      }

      /* Animation Performance Optimizations */
      .ascii-name,
      .system-info span,
      [data-component="projects"] .entry,
      .skills-grid > div,
      .skill-item,
      .section-title,
      .checksum {
        will-change: transform, opacity;
        backface-visibility: hidden;
        transform: translateZ(0); /* Force GPU layer */
      }

      /* Reduced Motion Support */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }

      /* Animation-ready elements */
      [data-component="projects"] .entry {
        transform-style: preserve-3d;
      }

      .skill-progress {
        overflow: hidden;
        background: var(--border-primary);
        height: 4px;
        border-radius: 2px;
        position: relative;
      }

      .skill-progress::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
        width: 0%;
        transition: width 0.3s ease;
        border-radius: 2px;
      }

      /* Parallax container */
      .watermark {
        transform: translateZ(0);
      }

      /* Remove old view-switcher styles - replaced with new mode-switcher */

      .ascii-name {
        font-family: var(--font-body);
        font-size: 10px;
        line-height: 1;
        color: var(--foreground-digital);
        margin: 20px 0;
        white-space: pre;
      }

      body.print-view .ascii-name {
        color: var(--foreground-print);
      }

      .system-info {
        display: flex;
        flex-direction: column;
        gap: 5px;
        font-size: 12px;
        color: var(--muted-digital);
        margin-top: 20px;
      }

      body.print-view .system-info {
        color: var(--muted-print);
      }

      .section {
        margin-bottom: 40px;
      }

      .section-title {
        font-size: 14px;
        font-weight: bold;
        color: var(--foreground-digital);
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      body.print-view .section-title {
        color: var(--foreground-print);
      }

      .entry {
        margin-bottom: 25px;
        padding: 15px 0;
        border-bottom: 1px solid var(--border-digital);
      }

      body.print-view .entry {
        border-bottom-color: var(--border-print);
      }

      .entry-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 8px;
        flex-wrap: wrap;
        gap: 10px;
      }

      .entry-title {
        font-weight: bold;
        color: var(--foreground-digital);
        font-size: 13px;
      }

      body.print-view .entry-title {
        color: var(--foreground-print);
      }

      .entry-meta {
        font-size: 11px;
        color: var(--muted-digital);
        white-space: nowrap;
      }

      body.print-view .entry-meta {
        color: var(--muted-print);
      }

      .entry-description {
        font-size: 12px;
        color: var(--muted-digital);
        line-height: 1.5;
        margin-bottom: 10px;
      }

      body.print-view .entry-description {
        color: var(--muted-print);
      }

      .comment {
        font-style: italic;
        opacity: 0.8;
      }

      .tech-stack {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 10px;
      }

      .tech-tag {
        background: var(--accent-digital);
        color: var(--foreground-digital);
        padding: 2px 8px;
        font-size: 10px;
        border: 1px solid var(--border-digital);
        font-family: var(--font-body);
      }

      body.print-view .tech-tag {
        background: var(--background-print);
        color: var(--foreground-print);
        border-color: var(--border-print);
      }

      .skills-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 30px;
      }

      .skill-category {
        margin-bottom: 20px;
      }

      .skill-header {
        font-weight: bold;
        color: var(--foreground-digital);
        margin-bottom: 15px;
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      body.print-view .skill-header {
        color: var(--foreground-print);
      }

      .skill-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        font-size: 12px;
      }

      .skill-level {
        color: var(--muted-digital);
        font-family: var(--font-body);
        font-size: 10px;
      }

      body.print-view .skill-level {
        color: var(--muted-print);
      }

      a {
        color: var(--foreground-digital);
        text-decoration: none;
        border-bottom: 1px dotted var(--muted-digital);
      }

      body.print-view a {
        color: var(--foreground-print);
        border-bottom-color: var(--muted-print);
      }

      a:hover {
        border-bottom-style: solid;
      }

      /* T027 - Enhanced Print-specific Styles and Layout */
      @media print {
        /* Reset for print optimization */
        * {
          -webkit-print-color-adjust: exact !important;
          color-adjust: exact !important;
        }

        body {
          background: white !important;
          color: black !important;
          font-family: 'Times New Roman', serif !important;
          font-size: 12pt !important;
          line-height: 1.4 !important;
          margin: 0 !important;
        }

        /* Print layout optimization */
        .container {
          max-width: none !important;
          padding: 0.5in !important;
          margin: 0 !important;
          display: block !important;
          page-break-inside: avoid;
        }

        /* Hide interactive elements */
        .digital-only,
        .view-switcher,
        button:not(.print-safe),
        nav,
        .navigation,
        [role="navigation"] {
          display: none !important;
        }

        /* Print-specific header styling */
        .header {
          margin-bottom: 0.3in !important;
          page-break-after: avoid;
        }

        .ascii-name {
          font-size: 8pt !important;
          line-height: 1.1 !important;
          font-family: 'Courier New', monospace !important;
          margin: 0.2in 0 !important;
          page-break-inside: avoid;
        }

        /* Contact section for print */
        .execute-protocol {
          margin-bottom: 0.25in !important;
          page-break-after: avoid;
          border-bottom: 1pt solid #ccc !important;
          padding-bottom: 0.15in !important;
        }

        .terminal-command,
        .comment {
          font-size: 10pt !important;
          margin-bottom: 0.1in !important;
          font-family: 'Courier New', monospace !important;
        }

        /* Section styling for print */
        .section {
          margin-bottom: 0.3in !important;
          page-break-inside: avoid;
          orphans: 3;
          widows: 3;
        }

        .section-title {
          font-size: 12pt !important;
          font-weight: bold !important;
          color: black !important;
          margin-bottom: 0.15in !important;
          text-transform: uppercase !important;
          letter-spacing: 1pt !important;
          border-bottom: 1pt solid black !important;
          padding-bottom: 0.05in !important;
          page-break-after: avoid;
        }

        /* Project entries for print */
        .entry {
          margin-bottom: 0.2in !important;
          padding: 0.1in 0 !important;
          border-bottom: 0.5pt solid #ccc !important;
          page-break-inside: avoid;
          orphans: 2;
          widows: 2;
        }

        .entry-header {
          display: flex !important;
          justify-content: space-between !important;
          align-items: baseline !important;
          margin-bottom: 0.05in !important;
          page-break-after: avoid;
        }

        .entry-title {
          font-weight: bold !important;
          color: black !important;
          font-size: 11pt !important;
        }

        .entry-meta {
          font-size: 9pt !important;
          color: #555 !important;
        }

        .entry-description {
          font-size: 10pt !important;
          color: #333 !important;
          line-height: 1.3 !important;
          margin-bottom: 0.1in !important;
        }

        /* Tech stack for print */
        .tech-stack {
          display: flex !important;
          flex-wrap: wrap !important;
          gap: 0.05in !important;
          margin-top: 0.1in !important;
        }

        .tech-tag {
          background: white !important;
          color: black !important;
          padding: 1pt 4pt !important;
          font-size: 8pt !important;
          border: 0.5pt solid black !important;
          font-family: 'Courier New', monospace !important;
        }

        /* Skills for print */
        .skills-grid {
          display: grid !important;
          grid-template-columns: repeat(2, 1fr) !important;
          gap: 0.15in !important;
          page-break-inside: avoid;
        }

        .skill-category {
          margin-bottom: 0.15in !important;
          page-break-inside: avoid;
        }

        .skill-header {
          font-weight: bold !important;
          color: black !important;
          margin-bottom: 0.1in !important;
          font-size: 10pt !important;
          text-transform: uppercase !important;
        }

        .skill-item {
          display: flex !important;
          justify-content: space-between !important;
          margin-bottom: 0.05in !important;
          font-size: 9pt !important;
        }

        .skill-level {
          color: #555 !important;
          font-family: 'Courier New', monospace !important;
          font-size: 8pt !important;
        }

        /* Links for print - show URLs */
        a {
          color: black !important;
          text-decoration: underline !important;
        }

        a[href^="http"]:after,
        a[href^="https"]:after,
        a[href^="mailto"]:after {
          content: " (" attr(href) ")" !important;
          font-size: 8pt !important;
          color: #666 !important;
          font-weight: normal !important;
        }

        /* QR code styling for print */
        .icon-print {
          width: 0.8in !important;
          height: 0.8in !important;
        }

        /* Watermark for print */
        .watermark {
          color: #999 !important;
          font-size: 8pt !important;
          position: fixed !important;
          top: 0.2in !important;
          left: 0.2in !important;
        }

        /* Footer/checksum for print */
        .checksum {
          margin-top: 0.3in !important;
          padding-top: 0.1in !important;
          border-top: 1pt solid #ccc !important;
          font-size: 8pt !important;
          color: #666 !important;
          page-break-before: avoid;
        }

        /* Page breaks */
        h1, h2, h3, .section-title {
          page-break-after: avoid;
        }

        .entry, .skill-category {
          page-break-inside: avoid;
        }

        /* Print margins for A4 paper */
        @page {
          margin: 0.75in 0.5in !important;
          size: A4 !important;
          
          @top-center {
            content: "Ali AlQattan - System Architect";
            font-size: 10pt;
            color: #666;
            margin-bottom: 0.2in;
          }
          
          @bottom-right {
            content: "Page " counter(page);
            font-size: 8pt;
            color: #666;
          }
        }

        /* Ensure no content is cut off */
        tr, img, table, blockquote {
          page-break-inside: avoid;
        }
      }

      /* T028 - QR Code Optimization for Print Mode */
      body.print-view .icon-print {
        width: 48px !important;
        height: 48px !important;
        filter: contrast(2) brightness(0.8);
        image-rendering: pixelated;
        image-rendering: -moz-crisp-edges;
        image-rendering: crisp-edges;
      }

      /* Ensure QR code is always visible and scannable */
      body.print-view .view-switcher {
        background: white;
        border: 2px solid black;
        padding: var(--space-2);
      }

      /* T029 - Mobile-First Responsive Design Patterns */
      /* Base mobile styles (320px and up) */
      .container {
        padding: var(--space-4) var(--space-4);
        gap: var(--space-16);
      }

      .ascii-name {
        font-size: 6px;
        overflow-x: auto;
        white-space: pre;
        -webkit-overflow-scrolling: touch;
      }

      /* Small mobile (375px and up) */
      @media (min-width: 375px) {
        .container {
          padding: var(--space-6) var(--space-6);
        }

        .ascii-name {
          font-size: 7px;
        }
      }

      /* Large mobile / small tablet (480px and up) */
      @media (min-width: 480px) {
        .container {
          padding: var(--space-8) var(--space-8);
        }

        .ascii-name {
          font-size: 8px;
        }

        .projects-grid {
          grid-template-columns: 1fr;
          gap: var(--space-12);
        }
      }

      /* Tablet (640px and up) */
      @media (min-width: 640px) {
        .container {
          gap: var(--space-20);
        }

        .projects-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: var(--space-16);
        }

        .skills-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: var(--space-20);
        }

        .entry-header {
          flex-direction: row;
          align-items: flex-start;
        }
      }

      /* Large tablet (768px and up) */
      @media (min-width: 768px) {
        .container {
          padding: var(--space-16) var(--space-16);
          gap: var(--space-24);
        }

        .ascii-name {
          font-size: 10px;
        }
      }

      /* Desktop (1024px and up) */
      @media (min-width: 1024px) {
        .container {
          gap: var(--space-32);
        }

        .projects-grid {
          grid-template-columns: repeat(3, 1fr);
          gap: var(--space-20);
        }

        .skills-grid {
          grid-template-columns: repeat(3, 1fr);
        }
      }

      /* Large desktop (1280px and up) */
      @media (min-width: 1280px) {
        .container {
          gap: var(--space-40);
        }

        .projects-grid {
          gap: var(--space-24);
        }
      }

      /* T030 - Touch-friendly Interactive Elements */
      @media (max-width: 1024px) {
        /* Ensure minimum touch target sizes */
        .view-switcher,
        button,
        a,
        [tabindex]:not([tabindex="-1"]),
        .interactive {
          min-width: 44px;
          min-height: 44px;
          display: inline-flex;
          align-items: center;
          justify-content: center;
          padding: var(--space-2);
        }

        /* Enhanced touch feedback */
        .view-switcher:active,
        button:active,
        .interactive:active {
          transform: scale(0.95);
          opacity: 0.8;
          transition: all var(--duration-fast) var(--ease-out-cubic);
        }

        /* Larger tap targets for links */
        a {
          padding: var(--space-1) var(--space-2);
          margin: calc(-1 * var(--space-1)) calc(-1 * var(--space-2));
          border-radius: var(--space-1);
        }

        /* Swipe-friendly horizontal scrolling */
        .ascii-name {
          scroll-behavior: smooth;
          -webkit-overflow-scrolling: touch;
          scrollbar-width: none;
          -ms-overflow-style: none;
        }

        .ascii-name::-webkit-scrollbar {
          display: none;
        }

        /* Touch-friendly tech tags */
        .tech-tag {
          min-height: 32px;
          padding: var(--space-2) var(--space-4);
          margin: var(--space-1);
          display: inline-flex;
          align-items: center;
          justify-content: center;
        }

        /* Prevent text selection on interactive elements */
        .view-switcher,
        button,
        .interactive {
          -webkit-user-select: none;
          -moz-user-select: none;
          -ms-user-select: none;
          user-select: none;
          -webkit-touch-callout: none;
        }

        /* Smoother animations on touch devices */
        * {
          -webkit-tap-highlight-color: rgba(0, 255, 65, 0.2);
          -webkit-touch-callout: none;
        }

        /* Safe area insets for modern mobile devices */
        .container {
          padding-left: max(var(--space-4), env(safe-area-inset-left));
          padding-right: max(var(--space-4), env(safe-area-inset-right));
          padding-bottom: max(var(--space-4), env(safe-area-inset-bottom));
        }

        /* Improved focus for touch devices */
        .view-switcher:focus-visible,
        button:focus-visible,
        a:focus-visible {
          outline: 3px solid var(--accent-primary);
          outline-offset: 2px;
          box-shadow: var(--glow-md);
        }
      }

      /* Extra large touch targets for small screens */
      @media (max-width: 480px) {
        .view-switcher {
          min-width: 48px;
          min-height: 48px;
        }

        /* Larger spacing for easier interaction */
        .flex-container {
          gap: var(--space-12);
        }

        /* Easier scrolling on small screens */
        .ascii-name {
          font-size: 6px;
          padding: var(--space-2);
          background: rgba(0, 255, 65, 0.05);
          border-radius: var(--space-1);
          margin: var(--space-4) 0;
        }
      }

      /* T031 - Advanced Print Media Queries with Page Break Optimization */
      @media print {
        /* Advanced page break control */
        .page-break-before {
          page-break-before: always !important;
          break-before: page !important;
        }

        .page-break-after {
          page-break-after: always !important;
          break-after: page !important;
        }

        .page-break-avoid {
          page-break-inside: avoid !important;
          break-inside: avoid !important;
        }

        /* Intelligent section breaks */
        .section:nth-of-type(2) {
          page-break-before: auto;
          break-before: auto;
        }

        /* Orphans and widows control for better typography */
        h1, h2, h3, h4, h5, h6 {
          orphans: 4 !important;
          widows: 4 !important;
          page-break-after: avoid !important;
          break-after: avoid !important;
        }

        p, .entry-description {
          orphans: 3 !important;
          widows: 3 !important;
        }

        /* Keep project entries together */
        .entry {
          page-break-inside: avoid !important;
          break-inside: avoid !important;
        }

        /* Footer placement optimization */
        .checksum {
          position: fixed !important;
          bottom: 0.5in !important;
          right: 0.5in !important;
          font-size: 8pt !important;
          color: #666 !important;
        }

        /* QR code print optimization */
        .icon-print {
          width: 32px !important;
          height: 32px !important;
          min-width: 32px !important;
          min-height: 32px !important;
          display: inline-block !important;
          visibility: visible !important;
        }

        .icon-digital {
          display: none !important;
        }

        /* Print link expansion */
        a[href^="http"]:after,
        a[href^="https"]:after {
          content: " (" attr(href) ")";
          font-size: 8pt;
          color: #666;
          font-style: italic;
        }

        /* Email links keep clean */
        a[href^="mailto:"]:after {
          content: "";
        }

        /* Color adjustments for print */
        * {
          background-color: transparent !important;
          background-image: none !important;
          box-shadow: none !important;
          text-shadow: none !important;
        }

        body {
          background: white !important;
          color: black !important;
        }

        /* Ensure proper margins for binding */
        @page {
          size: A4;
          margin: 0.75in 0.5in 0.75in 0.75in; /* Extra left margin for binding */
          @top-center {
            content: "Ali AlQattan - System Architect";
            font-family: Arial, sans-serif;
            font-size: 10pt;
            color: #666;
          }
          @bottom-right {
            content: "Page " counter(page) " of " counter(pages);
            font-family: Arial, sans-serif;
            font-size: 10pt;
            color: #666;
          }
        }

        /* Named pages for different sections */
        @page :first {
          @top-center {
            content: "";
          }
        }

        @page contact {
          @top-center {
            content: "Contact Information";
          }
        }

        @page projects {
          @top-center {
            content: "Project Portfolio";
          }
        }

        /* Apply named pages */
        .execute-protocol {
          page: contact;
        }

        .projects-grid {
          page: projects;
        }
      }

      /* T032 - Responsive Image Optimization (preparation for future images) */
      img, picture, svg {
        max-width: 100%;
        height: auto;
        display: block;
        margin: 0 auto;
      }

      /* Responsive SVG sizing */
      svg {
        width: 100%;
        height: auto;
      }

      .icon-print, .icon-digital {
        flex-shrink: 0;
        width: auto;
        height: auto;
      }

      /* Image loading optimization */
      img {
        loading: lazy;
        decoding: async;
      }

      /* Print mode image adjustments */
      @media print {
        img, svg, picture {
          max-width: 100% !important;
          page-break-inside: avoid !important;
          break-inside: avoid !important;
        }

        /* Hide decorative images in print */
        img[alt=""], 
        img:not([alt]),
        svg[aria-hidden="true"] {
          display: none !important;
        }
      }

      /* T033 - Container Queries for Component-Level Responsiveness */
      @container (min-width: 300px) {
        .entry {
          display: grid;
          grid-template-columns: 1fr auto;
          gap: var(--space-4);
          align-items: start;
        }

        .entry-header {
          grid-column: 1 / -1;
        }

        .entry-content {
          grid-column: 1;
        }

        .tech-stack {
          grid-column: 2;
          justify-self: end;
          max-width: 200px;
        }
      }

      @container (min-width: 500px) {
        .projects-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .skills-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @container (min-width: 800px) {
        .projects-grid {
          grid-template-columns: repeat(3, 1fr);
        }

        .skills-grid {
          grid-template-columns: repeat(3, 1fr);
        }

        .execute-protocol .flex-container {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: var(--space-8);
        }
      }

      /* Container query support for main sections */
      .section {
        container-type: inline-size;
        container-name: section;
      }

      .projects-grid {
        container-type: inline-size;
        container-name: projects;
      }

      .skills-grid {
        container-type: inline-size;
        container-name: skills;
      }

      .execute-protocol {
        container-type: inline-size;
        container-name: contact;
      }

      /* T034 - CSS Logical Properties for International Layouts */
      * {
        /* Use logical properties for better RTL/LTR support */
        margin-inline-start: 0;
        margin-inline-end: 0;
        margin-block-start: 0;
        margin-block-end: 0;
        padding-inline-start: 0;
        padding-inline-end: 0;
        padding-block-start: 0;
        padding-block-end: 0;
      }

      body {
        padding-inline: var(--space-4);
        padding-block: var(--space-8);
      }

      .container {
        margin-inline: auto;
        padding-inline: var(--space-6);
        padding-block: var(--space-4);
      }

      .section {
        margin-block-end: var(--space-20);
        padding-block-end: var(--space-16);
        border-block-end: 1px solid var(--border-digital);
      }

      body.print-view .section {
        border-block-end-color: var(--border-print);
      }

      .section-title {
        margin-block-end: var(--space-8);
        padding-block-end: var(--space-2);
        border-block-end: 1px solid var(--border-digital);
      }

      body.print-view .section-title {
        border-block-end-color: var(--border-print);
      }

      .entry {
        margin-block-end: var(--space-12);
        padding-block-end: var(--space-8);
        border-block-end: 1px solid var(--border-digital);
      }

      body.print-view .entry {
        border-block-end-color: var(--border-print);
      }

      .entry-header {
        margin-block-end: var(--space-4);
      }

      .entry-description {
        margin-block-end: var(--space-6);
      }

      .skill-category {
        margin-block-end: var(--space-8);
      }

      .skill-header {
        margin-block-end: var(--space-4);
      }

      .skill-item {
        margin-block-end: var(--space-2);
      }

      .tech-stack {
        margin-block-start: var(--space-4);
      }

      .flex-container {
        gap: var(--space-6);
      }

      .flex-container > * {
        margin-inline-end: var(--space-4);
      }

      .flex-container > *:last-child {
        margin-inline-end: 0;
      }

      /* RTL support */
      [dir="rtl"] .ascii-name {
        text-align: right;
      }

      [dir="rtl"] .system-info {
        text-align: right;
      }

      [dir="rtl"] .entry-header {
        flex-direction: row-reverse;
      }

      [dir="rtl"] .tech-stack {
        justify-content: flex-end;
      }

      /* Logical properties for print */
      @media print {
        .container {
          padding-inline: 0.5in;
          padding-block: 0.3in;
        }

        .section {
          margin-block-end: 0.3in;
          padding-block-end: 0.15in;
        }

        .entry {
          margin-block-end: 0.2in;
          padding-block: 0.1in;
        }
      }

      /* T035 - Advanced Accessibility with Focus Management */
      /* Enhanced focus indicators with improved visibility */
      :focus-visible {
        outline: 3px solid var(--accent-primary);
        outline-offset: 2px;
        border-radius: 4px;
        box-shadow: 0 0 0 6px rgba(0, 255, 65, 0.2);
        transition: all 0.2s ease-out;
      }

      /* High contrast mode support */
      @media (prefers-contrast: high) {
        :focus-visible {
          outline: 4px solid #00FF41;
          outline-offset: 3px;
          box-shadow: 0 0 0 8px rgba(0, 255, 65, 0.4);
        }

        .view-switcher,
        a,
        button {
          border: 2px solid currentColor;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.01s !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01s !important;
          scroll-behavior: auto !important;
        }

        .view-switcher,
        .entry,
        .skill-item {
          transition: none !important;
        }
      }

      /* Enhanced keyboard navigation */
      .skip-link {
        position: absolute;
        top: -40px;
        left: 6px;
        background: var(--accent-primary);
        color: var(--background-digital);
        padding: 8px 16px;
        text-decoration: none;
        border-radius: 4px;
        z-index: 1000;
        font-weight: 600;
        transition: top 0.3s ease-out;
      }

      .skip-link:focus {
        top: 6px;
      }

      /* Focus trap styles */
      .focus-trap-active {
        isolation: isolate;
      }

      .focus-trap-active *:not(.focus-within) {
        pointer-events: none;
        user-select: none;
      }

      /* Improved touch targets for accessibility */
      button,
      a,
      [tabindex]:not([tabindex="-1"]),
      input,
      select,
      textarea {
        min-width: 44px;
        min-height: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        touch-action: manipulation;
      }

      /* Screen reader improvements */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      .sr-only-focusable:focus {
        position: static;
        width: auto;
        height: auto;
        padding: 8px 16px;
        margin: 0;
        overflow: visible;
        clip: auto;
        white-space: normal;
        background: var(--accent-primary);
        color: var(--background-digital);
        border-radius: 4px;
        text-decoration: none;
        font-weight: 600;
        z-index: 1000;
      }

      /* ARIA live regions */
      .live-region {
        position: absolute;
        left: -10000px;
        width: 1px;
        height: 1px;
        overflow: hidden;
      }

      /* Enhanced color contrast for better readability */
      .high-contrast {
        filter: contrast(150%) saturate(120%);
      }

      @media (prefers-contrast: high) {
        body {
          filter: contrast(150%);
        }

        .view-switcher {
          background: #000000;
          color: #FFFFFF;
          border: 3px solid #00FF41;
        }

        body.print-view .view-switcher {
          background: #FFFFFF;
          color: #000000;
          border: 3px solid #000000;
        }
      }

      /* Focus management for interactive elements */
      .interactive-element {
        position: relative;
      }

      .interactive-element::after {
        content: '';
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
        border: 2px solid transparent;
        border-radius: 6px;
        pointer-events: none;
        transition: border-color 0.2s ease-out;
      }

      .interactive-element:focus-within::after {
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 4px rgba(0, 255, 65, 0.2);
      }

      /* Improved visibility for forced colors mode */
      @media (forced-colors: active) {
        .view-switcher {
          border: 2px solid ButtonBorder;
          background: ButtonFace;
          color: ButtonText;
        }

        .view-switcher:focus {
          border-color: Highlight;
          outline: 2px solid Highlight;
        }

        .entry,
        .section {
          border: 1px solid CanvasText;
        }

        a {
          color: LinkText;
        }

        a:visited {
          color: VisitedText;
        }
      }

      /* Print accessibility enhancements */
      @media print {
        .sr-only {
          position: static;
          width: auto;
          height: auto;
          clip: auto;
          overflow: visible;
          white-space: normal;
          font-size: 8pt;
          color: #666;
          font-style: italic;
        }

        /* Add content labels for screen readers in print */
        .section::before {
          content: "Section: " attr(aria-label);
          display: block;
          font-size: 8pt;
          color: #666;
          margin-bottom: 0.1in;
          font-style: italic;
        }
      }

      /* T036 - Performance Optimization and Core Web Vitals */
      /* Critical CSS optimizations for better performance */
      
      /* GPU acceleration for smooth animations */
      .view-switcher,
      .entry,
      .skill-item {
        transform: translateZ(0);
        will-change: transform;
        backface-visibility: hidden;
        perspective: 1000px;
      }

      /* Optimize font loading and rendering */
      body {
        font-display: swap;
        text-rendering: optimizeSpeed;
      }

      /* Use contain for layout stability */
      .section {
        contain: layout style;
      }

      .entry {
        contain: layout;
      }

      .projects-grid,
      .skills-grid {
        contain: layout style paint;
      }

      /* Optimize image rendering */
      img, svg, picture {
        image-rendering: -webkit-optimize-contrast;
        image-rendering: crisp-edges;
        contain: size layout;
      }

      /* Lazy loading enhancements */
      .entry,
      .skill-category {
        content-visibility: auto;
        contain-intrinsic-size: 200px;
      }

      /* Reduce layout shift */
      .ascii-name {
        aspect-ratio: 16 / 3;
        contain: size layout;
      }

      .view-switcher {
        contain: layout style;
      }

      /* Critical path optimization */
      .header {
        contain: layout style paint;
      }

      .system-info {
        contain: layout;
      }

      /* Memory optimization for large lists */
      .projects-grid > .entry:nth-child(n+10) {
        content-visibility: auto;
        contain-intrinsic-size: 250px;
      }

      .skills-grid > .skill-category:nth-child(n+6) {
        content-visibility: auto;
        contain-intrinsic-size: 150px;
      }

      /* Smooth scrolling optimization */
      html {
        scroll-behavior: smooth;
        scroll-padding-top: 2rem;
      }

      @media (prefers-reduced-motion: reduce) {
        html {
          scroll-behavior: auto;
        }
      }

      /* Intersection Observer target elements */
      .observe-visibility {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
      }

      .observe-visibility.in-view {
        opacity: 1;
        transform: translateY(0);
      }

      /* Optimized hover states */
      @media (hover: hover) and (pointer: fine) {
        .view-switcher:hover {
          transform: scale(1.05) translateZ(0);
          transition: transform 0.2s ease-out;
        }

        .entry:hover {
          transform: translateY(-2px) translateZ(0);
          transition: transform 0.3s ease-out;
        }

        a:hover {
          text-decoration-thickness: 2px;
          transition: text-decoration-thickness 0.2s ease-out;
        }
      }

      /* Prevent layout thrashing */
      * {
        box-sizing: border-box;
      }

      *::before,
      *::after {
        box-sizing: border-box;
      }

      /* CSS Grid optimizations */
      .projects-grid {
        grid-auto-rows: minmax(200px, auto);
        align-content: start;
      }

      .skills-grid {
        grid-auto-rows: minmax(120px, auto);
        align-content: start;
      }

      /* Optimize text selection */
      .ascii-name {
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
      }

      /* Browser optimizations */
      .view-switcher {
        -webkit-tap-highlight-color: rgba(0, 255, 65, 0.3);
        -webkit-touch-callout: none;
        -webkit-appearance: none;
        appearance: none;
      }

      /* Optimize custom property usage for better performance */
      .entry {
        --entry-border: var(--border-digital);
        --entry-bg: var(--background-digital);
        border-bottom-color: var(--entry-border);
        background-color: var(--entry-bg);
      }

      body.print-view .entry {
        --entry-border: var(--border-print);
        --entry-bg: var(--background-print);
      }

      /* Resource hints and preloading optimizations */
      .tech-stack {
        contain: layout;
        isolation: isolate;
      }

      /* Optimize paint workload */
      .flex-container {
        contain: layout;
      }

      .checksum {
        contain: layout style;
      }

      /* Performance monitoring elements */
      .perf-marker {
        display: none;
      }

      /* Core Web Vitals optimizations */
      /* Largest Contentful Paint (LCP) optimization */
      .ascii-name,
      .header {
        contain: layout style;
      }

      /* Cumulative Layout Shift (CLS) prevention */
      img,
      svg,
      picture {
        aspect-ratio: attr(width) / attr(height);
        width: 100%;
        height: auto;
      }

      /* First Input Delay (FID) optimization */
      .view-switcher {
        touch-action: manipulation;
      }

      button,
      a {
        touch-action: manipulation;
      }

      /* T037 - Advanced Animations with GSAP Integration */
      /* Prepare elements for GSAP animations */
      .gsap-fade-in {
        opacity: 0;
        transform: translateY(30px);
      }

      .gsap-scale-in {
        opacity: 0;
        transform: scale(0.9) translateY(20px);
      }

      .gsap-slide-in {
        opacity: 0;
        transform: translateX(-30px);
      }

      /* Animation-ready states */
      .projects-grid .entry {
        opacity: 0;
        transform: translateY(40px) scale(0.95);
      }

      .skills-grid .skill-category {
        opacity: 0;
        transform: translateY(30px);
      }

      .section-title {
        opacity: 0;
        transform: translateY(-20px);
      }

      .execute-protocol {
        opacity: 0;
        transform: translateY(20px);
      }

      /* Fallback animations for no-JS environments */
      @media (prefers-reduced-motion: no-preference) {
        .entry {
          animation: slideUpFade 0.8s ease-out forwards;
        }

        .entry:nth-child(1) { animation-delay: 0.1s; }
        .entry:nth-child(2) { animation-delay: 0.2s; }
        .entry:nth-child(3) { animation-delay: 0.3s; }
        .entry:nth-child(4) { animation-delay: 0.4s; }

        @keyframes slideUpFade {
          from {
            opacity: 0;
            transform: translateY(40px) scale(0.95);
          }
          to {
            opacity: 1;
            transform: translateY(0) scale(1);
          }
        }
      }

      /* Performance markers for GSAP */
      .gsap-trigger {
        contain: layout;
      }

      /* Smooth transitions */
      .smooth-transition {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
    </style>

    <!-- T037 - GSAP Animation System -->
    <script>
      import { gsap } from 'gsap';
      import { ScrollTrigger } from 'gsap/ScrollTrigger';

      // Check for GSAP availability and user motion preferences
      if (typeof gsap !== 'undefined' && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        gsap.registerPlugin(ScrollTrigger);

        // Set initial states
        gsap.set('.section-title', { opacity: 0, y: -20 });
        gsap.set('.execute-protocol', { opacity: 0, y: 20 });
        gsap.set('.projects-grid .entry', { opacity: 0, y: 40, scale: 0.95 });
        gsap.set('.skills-grid .skill-category', { opacity: 0, y: 30 });

        // Header entrance animation
        gsap.from('.ascii-name', {
          duration: 1.2,
          opacity: 0,
          scale: 0.8,
          ease: 'power3.out',
          delay: 0.2
        });

        gsap.from('.system-info span', {
          duration: 0.8,
          opacity: 0,
          y: 10,
          stagger: 0.1,
          ease: 'power2.out',
          delay: 0.5
        });

        // Section titles animation
        ScrollTrigger.batch('.section-title', {
          onEnter: (elements) => {
            gsap.to(elements, {
              duration: 0.8,
              opacity: 1,
              y: 0,
              ease: 'power3.out',
              stagger: 0.1
            });
          },
          start: 'top 90%'
        });

        // Contact section animation
        ScrollTrigger.create({
          trigger: '.execute-protocol',
          start: 'top 85%',
          onEnter: () => {
            gsap.to('.execute-protocol', {
              duration: 1,
              opacity: 1,
              y: 0,
              ease: 'power3.out'
            });

            gsap.from('.execute-protocol .flex-container > *', {
              duration: 0.6,
              opacity: 0,
              y: 15,
              stagger: 0.1,
              ease: 'power2.out',
              delay: 0.3
            });
          }
        });

        // Projects staggered animation
        ScrollTrigger.batch('.projects-grid .entry', {
          onEnter: (elements) => {
            gsap.to(elements, {
              duration: 1,
              opacity: 1,
              y: 0,
              scale: 1,
              ease: 'power3.out',
              stagger: {
                amount: 0.8,
                from: 'start'
              },
              clearProps: 'transform,opacity'
            });
          },
          start: 'top 85%',
          once: true
        });

        // Skills animation with delay
        ScrollTrigger.batch('.skills-grid .skill-category', {
          onEnter: (elements) => {
            gsap.to(elements, {
              duration: 0.8,
              opacity: 1,
              y: 0,
              ease: 'power2.out',
              stagger: {
                amount: 0.6,
                from: 'start'
              }
            });

            // Animate skill items within each category
            elements.forEach((category, index) => {
              const skillItems = category.querySelectorAll('.skill-item');
              gsap.from(skillItems, {
                duration: 0.5,
                opacity: 0,
                x: -20,
                stagger: 0.05,
                ease: 'power2.out',
                delay: index * 0.1 + 0.3
              });
            });
          },
          start: 'top 80%',
          once: true
        });

        // Mode switcher animation
        const modeSwitcher = document.querySelector('.view-switcher');
        if (modeSwitcher) {
          gsap.from(modeSwitcher, {
            duration: 1,
            scale: 0,
            rotation: 180,
            ease: 'elastic.out(1, 0.5)',
            delay: 0.8
          });

          // Add hover animation
          modeSwitcher.addEventListener('mouseenter', () => {
            gsap.to(modeSwitcher, {
              duration: 0.3,
              scale: 1.1,
              ease: 'power2.out'
            });
          });

          modeSwitcher.addEventListener('mouseleave', () => {
            gsap.to(modeSwitcher, {
              duration: 0.3,
              scale: 1,
              ease: 'power2.out'
            });
          });
        }

        // Parallax-like effect for checksum
        ScrollTrigger.create({
          trigger: '.checksum',
          start: 'top bottom',
          end: 'bottom top',
          scrub: 1,
          onUpdate: (self) => {
            const progress = self.progress;
            gsap.to('.checksum', {
              duration: 0.3,
              opacity: 0.4 + (progress * 0.6),
              ease: 'none'
            });
          }
        });

        // Performance optimization
        ScrollTrigger.config({
          limitCallbacks: true,
          syncInterval: 150
        });

        // Refresh ScrollTrigger on resize
        ScrollTrigger.addEventListener('refreshInit', () => {
          gsap.set('.section-title, .execute-protocol, .projects-grid .entry, .skills-grid .skill-category', 
            { clearProps: 'all' }
          );
        });

        // Cleanup function
        window.addEventListener('beforeunload', () => {
          ScrollTrigger.getAll().forEach(trigger => trigger.kill());
        });

        console.log('🎬 GSAP scroll animations initialized');
      } else {
        // Fallback for reduced motion or missing GSAP
        console.log('🔇 Animations disabled (reduced motion or GSAP unavailable)');
        
        // Apply immediate visibility for fallback
        gsap?.set?.('.section-title, .execute-protocol, .projects-grid .entry, .skills-grid .skill-category', 
          { opacity: 1, y: 0, scale: 1 }
        ) || requestAnimationFrame(() => {
          document.querySelectorAll('.section-title, .execute-protocol, .projects-grid .entry, .skills-grid .skill-category')
            .forEach(el => {
              (el as HTMLElement).style.opacity = '1';
              (el as HTMLElement).style.transform = 'none';
            });
        });
      }
    </script>
</body>
</html>

